---
default: &default
  bootloader: &bootloader
  - installation/bootloader_start
  setup_libyui: &setup_libyui
  - installation/setup_libyui
  license_agreement: &license_agreement
  - installation/licensing/accept_license
  disable_online_repos: &disable_online_repos
  - installation/online_repos/disable_online_repos
  installation_mode: &installation_mode
  - installation/installation_mode
  logpackages: &logpackages
  - installation/logpackages
  system_role: &system_role []
  accept_proposed_layout: &accept_proposed_layout
  - installation/partitioning/accept_proposed_layout  
  clock_and_timezone: &clock_and_timezone
  - installation/clock_and_timezone/accept_timezone_configuration
  local_user: &local_user
  - installation/authentication/default_user_simple_pwd
  installation_settings_booting: &installation_settings_booting
  - installation/bootloader_settings/disable_boot_menu_timeout
  install: &install 
  - installation/launch_installation
  - installation/confirm_installation
  - installation/performing_installation/perform_installation
  install_logs: &install_logs
  - installation/logs_from_installation_system
  reboot: &reboot
  - installation/reboot_after_installation
  grub: &handle_reboot
  - installation/handle_reboot
  first_login: &first_login
  - installation/first_boot
  system_validation: &system_validation []

guided: &guided
  bootloader: *bootloader
  setup_libyui: *setup_libyui
  license_agreement: *license_agreement
  disable_online_repos: *disable_online_repos
  installation_mode: *installation_mode
  logpackages: *logpackages
  system_role: *system_role
  select_guided_setup:
  - installation/partitioning/select_guided_setup
  select_hard_disks: []
  partitioning_scheme:
  - installation/partitioning/guided_setup/accept_default_part_scheme
  filesystem_options:
  - installation/partitioning/guided_setup/accept_default_fs_options
  accept_proposed_layout: *accept_proposed_layout
  clock_and_timezone: *clock_and_timezone
  local_user: *local_user
  installation_settings_booting: *installation_settings_booting
  install: *install
  install_logs: *install_logs
  reboot: *reboot
  grub: *handle_reboot
  first_login: *first_login
  system_validation: *system_validation

guided+gnome: &guided+gnome
  <<: *guided
  system_role:
  - installation/system_role/select_role_desktop_with_GNOME

guided+kde: &guided+kde
  <<: *guided
  system_role:
  - installation/system_role/select_role_desktop_with_KDE_plasma

guided+server: &guided+server
  <<: *guided
  system_role:
  - installation/system_role/select_role_server

guided+gnome+no_autologin: &guided+gnome+no_autologin
  <<: *guided+gnome
  local_user: 
  - installation/authentication/disable_autologin

# validation
guided+gnome+no_autologin+part_val:
  <<: *guided+gnome+no_autologin
  system_validation: 
  - console/validate_partition_table_via_blkid
  - console/validate_blockdevices
  - console/validate_free_space
  - console/validate_read_write

guided+server+part_val:
  <<: *guided+server
  system_validation: 
  - console/validate_partition_table_via_blkid
  - console/validate_blockdevices
  - console/validate_free_space
  - console/validate_read_write

guided+kde+btrfs_val:
  <<: *guided+kde
  system_validation:
  - console/validate_no_cow_attribute
  - console/verify_no_separate_home
  - console/validate_subvolumes
